<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./pokedex.css" />
  <title>Pokedex</title>
</head>

<body>


  <div class="container">
    <h1>Pokedex</h1>
    <ul id="pokedex-container">

    </ul>
  </div>



  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script>
    const fetchPokemon = () => {

      // start with empty array
      const promises = [];
      for (let i = 1; i <= 151; i++) {
        const url = `https://pokeapi.co/api/v2/pokemon/${i}`;
        const getPokemon = fetch(url).then(r => r.json());
        promises.push(getPokemon);
      }

      Promise.all(promises).then(results => {
        const pokemon = results.map(data => ({
          name: data.name,
          id: data.id,
          image: data.sprites['front_default'],
          type: data.types.map(type => type.type.name).join(', ')
        }));
        displayPokemon(pokemon);
      });
    };

    const displayPokemon = (pokemon) => {
      const pokedexContainer = document.getElementById('pokedex-container');
      pokemon.forEach(pokemon => {
        const li = document.createElement('li');
        li.className = 'card'
        li.classList.add('pokemon-details');
        li.addEventListener('click', ev => {
          window.location.href = 'Index.html?id=' + pokemon.id;
        });
        li.innerHTML = `
          <img class='card-image'
            src='${pokemon.image}'>
          <div class='card-content'>
            <h2 class='card-title'>
              ${pokemon.name}
            </h2>
            <p class='card-subtitle'>
              ${pokemon.id}
            </p>
            <p class='card-subtitle'>
              ${pokemon.type}
            </p>
          </div>
          `;
        pokedexContainer.appendChild(li);
      })
    };

    fetchPokemon();


  

  </script>
</body>

</html>